<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MediRadar â€¢ Portal Î¦Î±ÏÎ¼Î±ÎºÎµÎ¯Î¿Ï…</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class',theme:{extend:{fontFamily:{sans:['Inter','ui-sans-serif','system-ui']},colors:{brand:{600:'#208181'}}}}}</script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="sticky top-0 z-20 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-4xl mx-auto px-4 h-14 flex items-center justify-between">
      <a href="/" class="text-sm">â† Î‘ÏÏ‡Î¹ÎºÎ®</a>
      <div class="flex items-center gap-2">
        <button id="lang-el" class="text-xs px-2 py-1 rounded-lg border">ğŸ‡¬ğŸ‡· EL</button>
        <button id="lang-en" class="text-xs px-2 py-1 rounded-lg border">ğŸ‡¬ğŸ‡§ EN</button>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-8">
    <!-- Login card -->
    <section id="login-card" class="max-w-md mx-auto rounded-2xl bg-white border border-slate-200 p-6 shadow">
      <h1 class="text-xl font-bold mb-4">Pharmacy Login</h1>
      <input id="email" type="email" class="w-full mb-3 px-3 py-3 rounded-xl border" placeholder="email@pharmacy.gr" />
      <input id="pass" type="password" class="w-full mb-4 px-3 py-3 rounded-xl border" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" />
      <button id="doLogin" class="w-full px-4 py-3 rounded-xl bg-brand-600 text-white font-semibold">Î£ÏÎ½Î´ÎµÏƒÎ·</button>
      <p class="mt-3 text-xs text-slate-500">(*) Demo portal â€“ Î· Ï€ÏÎ±Î³Î¼Î±Ï„Î¹ÎºÎ® Î±Ï…Î¸ÎµÎ½Ï„Î¹ÎºÎ¿Ï€Î¿Î¯Î·ÏƒÎ· Î¸Î± Î´ÎµÎ¸ÎµÎ¯ Î¼Îµ Supabase.</p>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="hidden space-y-6">
      <div class="rounded-2xl bg-white border p-4">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-bold">Î Î¯Î½Î±ÎºÎ±Ï‚</h2>
          <button id="logout" class="text-sm underline">ÎˆÎ¾Î¿Î´Î¿Ï‚</button>
        </div>
        <p class="text-sm text-slate-600 mt-1">Î”Î¹Î±Ï‡ÎµÎ¹ÏÎ¹ÏƒÏ„ÎµÎ¯Ï„Îµ Î±Î¹Ï„Î®Î¼Î±Ï„Î± ÎºÎ±Î¹ ÏƒÏ„Î¿Î¹Ï‡ÎµÎ¯Î± ÎºÎ±Ï„Î±ÏƒÏ„Î®Î¼Î±Ï„Î¿Ï‚.</p>
      </div>

      <!-- Hours form -->
      <div class="rounded-2xl bg-white border p-4">
        <h3 class="font-semibold mb-3">Î©ÏÎ¬ÏÎ¹Î¿ Î»ÎµÎ¹Ï„Î¿Ï…ÏÎ³Î¯Î±Ï‚</h3>

        <div id="hours-form" class="grid sm:grid-cols-2 gap-4">
          <!-- Î”Î·Î¼Î¹Î¿Ï…ÏÎ³ÎµÎ¯Ï„Î±Î¹ Î´Ï…Î½Î±Î¼Î¹ÎºÎ¬ -->
        </div>

        <div class="mt-4 flex gap-2">
          <button id="save-hours" class="px-4 py-2 rounded-xl bg-emerald-600 text-white">Î‘Ï€Î¿Î¸Î®ÎºÎµÏ…ÏƒÎ· Ï‰ÏÎ±ÏÎ¯Î¿Ï…</button>
          <span id="save-msg" class="text-sm text-slate-500"></span>
        </div>

        <p class="mt-3 text-xs text-slate-500">
          Î¤Î± Ï‰ÏÎ¬ÏÎ¹Î± Î±Ï€Î¿Î¸Î·ÎºÎµÏÎ¿Î½Ï„Î±Î¹ Ï„Î¿Ï€Î¹ÎºÎ¬ (demo). Î£Ï„Î·Î½ Ï€Î±ÏÎ±Î³Ï‰Î³Î® Î¸Î± Î³ÏÎ¬Ï†Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î· Î²Î¬ÏƒÎ· ÎºÎ±Î¹ Î¸Î± ÎµÎ¼Ï†Î±Î½Î¯Î¶Î¿Î½Ï„Î±Î¹ ÏƒÏ„Î¿Ï…Ï‚ Ï€ÎµÎ»Î¬Ï„ÎµÏ‚ (Â«ÎšÎ»ÎµÎ¯Î½ÎµÎ¹ ÏƒÏ„Î¹Ï‚ HH:MMÂ» / Â«ÎšÎ»ÎµÎ¹ÏƒÏ„ÏŒÂ»).
        </p>
      </div>

      <!-- Incoming requests (placeholder) -->
      <div class="rounded-2xl bg-white border p-4">
        <h3 class="font-semibold mb-2">Î‘Î¹Ï„Î®Î¼Î±Ï„Î± (demo)</h3>
        <p class="text-sm text-slate-600">Î— Î»Î¯ÏƒÏ„Î± Î±Ï€Î±Î½Ï„Î®ÏƒÎµÏ‰Î½/Â«Î”Î¹Î±Î¸Î­ÏƒÎ¹Î¼Î¿Â» Î¸Î± ÏƒÏ…Î½Î´ÎµÎ¸ÎµÎ¯ Î¼Îµ Supabase.</p>
      </div>
    </section>
  </main>

  <script>
    const DAYS = [
      {i:1, el:'Î”ÎµÏ…Ï„Î­ÏÎ±'}, {i:2, el:'Î¤ÏÎ¯Ï„Î·'}, {i:3, el:'Î¤ÎµÏ„Î¬ÏÏ„Î·'}, {i:4, el:'Î Î­Î¼Ï€Ï„Î·'}, {i:5, el:'Î Î±ÏÎ±ÏƒÎºÎµÏ…Î®'}, {i:6, el:'Î£Î¬Î²Î²Î±Ï„Î¿'}, {i:0, el:'ÎšÏ…ÏÎ¹Î±ÎºÎ®'}
    ];

    /* Fake auth (demo) */
    const loginCard=document.getElementById('login-card'), dash=document.getElementById('dashboard');
    function getKey(){ return 'ph_'+(localStorage.getItem('ph_email')||'demo@pharmacy.gr'); }
    document.getElementById('doLogin').onclick=()=>{
      const email=document.getElementById('email').value.trim(); if(!email) return alert('email?');
      localStorage.setItem('ph_email', email);
      loginCard.classList.add('hidden'); dash.classList.remove('hidden'); renderHours();
    };
    document.getElementById('logout').onclick=()=>{ localStorage.removeItem('ph_email'); dash.classList.add('hidden'); loginCard.classList.remove('hidden'); };

    /* Hours form */
    function renderHours(){
      const wrap=document.getElementById('hours-form'); wrap.innerHTML='';
      const saved = JSON.parse(localStorage.getItem(getKey()+'_hours')||'{}');
      DAYS.forEach(d=>{
        const row=document.createElement('div');
        row.className='flex items-center justify-between gap-3 border rounded-xl p-3';
        row.innerHTML=`
          <div class="w-28 font-medium">${d.el}</div>
          <label class="text-sm flex items-center gap-2"><input type="checkbox" data-day="${d.i}" class="day-closed"> ÎšÎ»ÎµÎ¹ÏƒÏ„ÏŒ</label>
          <div class="flex items-center gap-2">
            <input type="time" class="o time px-2 py-1 border rounded" data-day="${d.i}">
            <span>-</span>
            <input type="time" class="c time px-2 py-1 border rounded" data-day="${d.i}">
          </div>`;
        wrap.appendChild(row);
      });
      // load values
      for (const k in saved){
        const v=saved[k]; // {o:'08:00',c:'17:00'}
        const o=document.querySelector(`input.o[data-day="${k}"]`);
        const c=document.querySelector(`input.c[data-day="${k}"]`);
        const chk=document.querySelector(`input.day-closed[data-day="${k}"]`);
        if(v && v.o && v.c){ o.value=v.o; c.value=v.c; chk.checked=false; }
        else { chk.checked=true; o.value=''; c.value=''; }
      }
      // toggle disable
      document.querySelectorAll('.day-closed').forEach(chk=>{
        const day=chk.dataset.day;
        const o=document.querySelector(`input.o[data-day="${day}"]`);
        const c=document.querySelector(`input.c[data-day="${day}"]`);
        function sync(){ const dis=chk.checked; o.disabled=dis; c.disabled=dis; o.classList.toggle('opacity-40',dis); c.classList.toggle('opacity-40',dis); }
        chk.addEventListener('change',sync); sync();
      });
    }

    document.getElementById('save-hours').onclick=()=>{
      const map={};
      document.querySelectorAll('#hours-form > div').forEach(row=>{
        const chk=row.querySelector('.day-closed');
        const day=chk.dataset.day;
        if(chk.checked){ map[day]={}; }
        else{
          const o=row.querySelector('.o').value, c=row.querySelector('.c').value;
          if(o && c) map[day]={o,c};
        }
      });
      localStorage.setItem(getKey()+'_hours', JSON.stringify(map));
      document.getElementById('save-msg').textContent='âœ” Î‘Ï€Î¿Î¸Î·ÎºÎµÏÏ„Î·ÎºÎµ';
      setTimeout(()=>document.getElementById('save-msg').textContent='',1500);
    };

    // auto-show dashboard if remembered
    if(localStorage.getItem('ph_email')){ loginCard.classList.add('hidden'); dash.classList.remove('hidden'); renderHours(); }
  </script>
</body>
</html>

<!DOCTYPE html>
<html lang="el">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>MediRadar • Portal Φαρμακείου</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>tailwind.config={darkMode:'class',theme:{extend:{fontFamily:{sans:['Inter','ui-sans-serif','system-ui']},colors:{brand:{600:'#208181'}}}}}</script>
</head>
<body class="bg-slate-50 text-slate-900">
  <header class="sticky top-0 z-20 bg-white/80 backdrop-blur border-b border-slate-200">
    <div class="max-w-4xl mx-auto px-4 h-14 flex items-center justify-between">
      <a href="/" class="text-sm">← Αρχική</a>
      <div class="flex items-center gap-2">
        <button id="lang-el" class="text-xs px-2 py-1 rounded-lg border">🇬🇷 EL</button>
        <button id="lang-en" class="text-xs px-2 py-1 rounded-lg border">🇬🇧 EN</button>
      </div>
    </div>
  </header>

  <main class="max-w-4xl mx-auto px-4 py-8">
    <!-- Login card -->
    <section id="login-card" class="max-w-md mx-auto rounded-2xl bg-white border border-slate-200 p-6 shadow">
      <h1 class="text-xl font-bold mb-4">Pharmacy Login</h1>
      <input id="email" type="email" class="w-full mb-3 px-3 py-3 rounded-xl border" placeholder="email@pharmacy.gr" />
      <input id="pass" type="password" class="w-full mb-4 px-3 py-3 rounded-xl border" placeholder="••••••••" />
      <button id="doLogin" class="w-full px-4 py-3 rounded-xl bg-brand-600 text-white font-semibold">Σύνδεση</button>
      <p class="mt-3 text-xs text-slate-500">(*) Demo portal – η πραγματική αυθεντικοποίηση θα δεθεί με Supabase.</p>
    </section>

    <!-- Dashboard -->
    <section id="dashboard" class="hidden space-y-6">
      <div class="rounded-2xl bg-white border p-4">
        <div class="flex items-center justify-between">
          <h2 class="text-lg font-bold">Πίνακας</h2>
          <button id="logout" class="text-sm underline">Έξοδος</button>
        </div>
        <p class="text-sm text-slate-600 mt-1">Διαχειριστείτε αιτήματα και στοιχεία καταστήματος.</p>
      </div>

      <!-- Hours form -->
      <div class="rounded-2xl bg-white border p-4">
        <h3 class="font-semibold mb-3">Ωράριο λειτουργίας</h3>

        <div id="hours-form" class="grid sm:grid-cols-2 gap-4">
          <!-- Δημιουργείται δυναμικά -->
        </div>

        <div class="mt-4 flex gap-2">
          <button id="save-hours" class="px-4 py-2 rounded-xl bg-emerald-600 text-white">Αποθήκευση ωραρίου</button>
          <span id="save-msg" class="text-sm text-slate-500"></span>
        </div>

        <p class="mt-3 text-xs text-slate-500">
          Τα ωράρια αποθηκεύονται τοπικά (demo). Στην παραγωγή θα γράφονται στη βάση και θα εμφανίζονται στους πελάτες («Κλείνει στις HH:MM» / «Κλειστό»).
        </p>
      </div>

      <!-- Incoming requests (placeholder) -->
      <div class="rounded-2xl bg-white border p-4">
        <h3 class="font-semibold mb-2">Αιτήματα (demo)</h3>
        <p class="text-sm text-slate-600">Η λίστα απαντήσεων/«Διαθέσιμο» θα συνδεθεί με Supabase.</p>
      </div>
    </section>
  </main>

  <script>
    const DAYS = [
      {i:1, el:'Δευτέρα'}, {i:2, el:'Τρίτη'}, {i:3, el:'Τετάρτη'}, {i:4, el:'Πέμπτη'}, {i:5, el:'Παρασκευή'}, {i:6, el:'Σάββατο'}, {i:0, el:'Κυριακή'}
    ];

    /* Fake auth (demo) */
    const loginCard=document.getElementById('login-card'), dash=document.getElementById('dashboard');
    function getKey(){ return 'ph_'+(localStorage.getItem('ph_email')||'demo@pharmacy.gr'); }
    document.getElementById('doLogin').onclick=()=>{
      const email=document.getElementById('email').value.trim(); if(!email) return alert('email?');
      localStorage.setItem('ph_email', email);
      loginCard.classList.add('hidden'); dash.classList.remove('hidden'); renderHours();
    };
    document.getElementById('logout').onclick=()=>{ localStorage.removeItem('ph_email'); dash.classList.add('hidden'); loginCard.classList.remove('hidden'); };

    /* Hours form */
    function renderHours(){
      const wrap=document.getElementById('hours-form'); wrap.innerHTML='';
      const saved = JSON.parse(localStorage.getItem(getKey()+'_hours')||'{}');
      DAYS.forEach(d=>{
        const row=document.createElement('div');
        row.className='flex items-center justify-between gap-3 border rounded-xl p-3';
        row.innerHTML=`
          <div class="w-28 font-medium">${d.el}</div>
          <label class="text-sm flex items-center gap-2"><input type="checkbox" data-day="${d.i}" class="day-closed"> Κλειστό</label>
          <div class="flex items-center gap-2">
            <input type="time" class="o time px-2 py-1 border rounded" data-day="${d.i}">
            <span>-</span>
            <input type="time" class="c time px-2 py-1 border rounded" data-day="${d.i}">
          </div>`;
        wrap.appendChild(row);
      });
      // load values
      for (const k in saved){
        const v=saved[k]; // {o:'08:00',c:'17:00'}
        const o=document.querySelector(`input.o[data-day="${k}"]`);
        const c=document.querySelector(`input.c[data-day="${k}"]`);
        const chk=document.querySelector(`input.day-closed[data-day="${k}"]`);
        if(v && v.o && v.c){ o.value=v.o; c.value=v.c; chk.checked=false; }
        else { chk.checked=true; o.value=''; c.value=''; }
      }
      // toggle disable
      document.querySelectorAll('.day-closed').forEach(chk=>{
        const day=chk.dataset.day;
        const o=document.querySelector(`input.o[data-day="${day}"]`);
        const c=document.querySelector(`input.c[data-day="${day}"]`);
        function sync(){ const dis=chk.checked; o.disabled=dis; c.disabled=dis; o.classList.toggle('opacity-40',dis); c.classList.toggle('opacity-40',dis); }
        chk.addEventListener('change',sync); sync();
      });
    }

    document.getElementById('save-hours').onclick=()=>{
      const map={};
      document.querySelectorAll('#hours-form > div').forEach(row=>{
        const chk=row.querySelector('.day-closed');
        const day=chk.dataset.day;
        if(chk.checked){ map[day]={}; }
        else{
          const o=row.querySelector('.o').value, c=row.querySelector('.c').value;
          if(o && c) map[day]={o,c};
        }
      });
      localStorage.setItem(getKey()+'_hours', JSON.stringify(map));
      document.getElementById('save-msg').textContent='✔ Αποθηκεύτηκε';
      setTimeout(()=>document.getElementById('save-msg').textContent='',1500);
    };

    // auto-show dashboard if remembered
    if(localStorage.getItem('ph_email')){ loginCard.classList.add('hidden'); dash.classList.remove('hidden'); renderHours(); }
  </script>
</body>
</html>
